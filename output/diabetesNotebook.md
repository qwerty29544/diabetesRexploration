---
title: "Исследование многопараметрических данных"
author: "Юрченков Иван Александрович"
date: "18 02 2021"
output: 
  word_document: 
    toc: yes
    highlight: haddock
    fig_width: 8
    fig_height: 8
    fig_caption: yes
    keep_md: yes
---

## Введение



Данные, используемые в текущем проекте, содержат ряд диагностических показателей диабета 2 типа у женщин из индийского наследия Пима, а также того, имеет ли индивидуум диабет 2 типа.

Всего имеется 768 наблюдений и 9 переменных. Переменные в наборе данных:

-   Беременности
-   Глюкоза - концентрация глюкозы в плазме крови после 2-часового орального теста на толерантность к глюкозе.
-   BloodPressure - Диастолическое артериальное давление (мм / HG).
-   SkinThickness - толщина трицепса (мм).
-   Инсулин - 2 часа сывороточного инсулина (м.е. / мл).  https://ru.wikipedia.org/wiki/%D0%9C%D0%B5%D0%B6%D0%B4%D1%83%D0%BD%D0%B0%D1%80%D0%BE%D0%B4%D0%BD%D0%B0%D1%8F_%D0%B5%D0%B4%D0%B8%D0%BD%D0%B8%D1%86%D0%B0
-   ИМТ - индекс массы тела (кг / м в квадрате)
-   DiabetesPedigreeFunction - функция, которая определяет риск развития диабета 2 типа на основе семейного анамнеза. Чем больше функция, тем выше риск развития диабета 2 типа.
-   Возраст.
-   Результат - диагностирован ли у человека диабет 2 типа (1 = да, 0 = нет).

Особенно интересным атрибутом, использованным в исследовании, была «Родословная функция диабета». Он предоставил некоторые данные об истории сахарного диабета у родственников и генетических отношениях этих родственников с пациентом. Эта мера генетического влияния дала нам представление о наследственном риске, который может возникнуть при появлении сахарного диабета. Основываясь на наблюдениях в последующем разделе, неясно, насколько хорошо эта функция предсказывает начало диабета.



Посмотрим на структуру данных


```
## 'data.frame':	768 obs. of  9 variables:
##  $ Pregnancies             : int  6 1 8 1 0 5 3 10 2 8 ...
##  $ Glucose                 : int  148 85 183 89 137 116 78 115 197 125 ...
##  $ BloodPressure           : int  72 66 64 66 40 74 50 0 70 96 ...
##  $ SkinThickness           : int  35 29 0 23 35 0 32 0 45 0 ...
##  $ Insulin                 : int  0 0 0 94 168 0 88 0 543 0 ...
##  $ BMI                     : num  33.6 26.6 23.3 28.1 43.1 25.6 31 35.3 30.5 0 ...
##  $ DiabetesPedigreeFunction: num  0.627 0.351 0.672 0.167 2.288 ...
##  $ Age                     : int  50 31 32 21 33 30 26 29 53 54 ...
##  $ Outcome                 : int  1 0 1 0 1 0 1 0 1 1 ...
```

Выведем все метаданные

+--------------------------+--------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------+
| Название поля            | Трактовка                                                                | Трактовка на русском                                                                                                                                 | Единицы измерения |
+==========================+==========================================================================+======================================================================================================================================================+===================+
| Pregnancies              | Number of times pregnant                                                 | Беременностей                                                                                                                                        | шт.               |
+--------------------------+--------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------+
| Glucose                  | Plasma glucose concentration a 2 hours in an oral glucose tolerance test | Концентрация глюкозы в плазме через 2 часа при пероральном тесте на толерантность к глюкозе                                                          | ммоль/л           |
+--------------------------+--------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------+
| BloodPressure            | Diastolic blood pressure (mm Hg)                                         | Диастолическое артериальное давление (мм рт. Ст.)                                                                                                    | мм.рт.ст          |
+--------------------------+--------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------+
| SkinThickness            | Triceps skin fold thickness (mm)                                         | Толщина кожной складки трицепса (мм)                                                                                                                 | мм                |
+--------------------------+--------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------+
| Insulin                  | 2-Hour serum insulin (mu U/ml)                                           | 2-часовой сывороточный инсулин (мЕд/мл, мМЕ/мл) - сколько микрограмм того или иного вещества соответствуют условной единице биологической активности | мЕд/мл            |
+--------------------------+--------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------+
| BMI                      | Body mass index (weight in kg/(height in m)\^2)                          | Индекс массы тела (вес в кг / (рост в м) \^ 2)                                                                                                       | кг / (м\^2)       |
+--------------------------+--------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------+
| DiabetesPedigreeFunction | Diabetes pedigree function                                               | Родословная диабетическая функция                                                                                                                    | у.е.              |
+--------------------------+--------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------+
| Age                      | Age (years)                                                              | Возраст                                                                                                                                              | Годы              |
+--------------------------+--------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------+
| Outcome                  | Class variable (0 or 1) 268 of 768 are 1, the others are 0               | Переменная класса (0 или 1) 268 из 768 равны 1, остальные равны 0                                                                                    | логическая        |
+--------------------------+--------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------+

: Метаданные полей


## Предварительный анализ

Сначала я изучил каждый атрибут и рассмотрел параметры распространения, подготовленные Weka Explorer. Я заметил, что:

-   Атрибуты preg и age являются целыми числами.
-   Население, как правило, молодое, менее 50 лет.
-   Некоторые атрибуты, где существует нулевое значение, кажутся ошибками в данных (например, Plas, Pres, Skin, InS и Mass).

Изучив распределение значений классов, я заметил, что существует 500 отрицательных случаев (65,1%) и 258 положительных случаев (34,9%).

![](diabetesNotebook_files/figure-docx/unnamed-chunk-2-1.png)<!-- -->



Рисунок 1. Корреляционная карта признаков данных.

![](diabetesNotebook_files/figure-docx/bloodpressure density-1.png)<!-- -->

![](diabetesNotebook_files/figure-docx/glucoze density-1.png)<!-- -->

![](diabetesNotebook_files/figure-docx/skinthickness density-1.png)<!-- -->

![](diabetesNotebook_files/figure-docx/insulin density-1.png)<!-- -->

![](diabetesNotebook_files/figure-docx/BMI density-1.png)<!-- -->

![](diabetesNotebook_files/figure-docx/entfamily density-1.png)<!-- -->

![](diabetesNotebook_files/figure-docx/age density-1.png)<!-- -->

![](diabetesNotebook_files/figure-docx/hist detailed-1.png)<!-- -->

Просмотр гистограмм всех атрибутов в наборе данных показывает нам, что:

-   Некоторые атрибуты выглядят нормально распределенными (plas, pres, skin и mass).
-   Некоторые из атрибутов выглядят так, как будто они имеют экспоненциальное распределение (preg, ins, pedi, age).
-   Возраст, вероятно, должен иметь нормальное распределение, ограничения на сбор данных могли исказить распределение.
-   Тестирование на нормальность (график нормальности) может представлять интерес. Мы могли бы посмотреть на подгонку данных к нормальному распределению.

Просмотр диаграмм разброса всех атрибутов в наборе данных показывает, что:

-   Не существует очевидной связи между возрастом и началом диабета.
-   Не существует очевидной связи между функцией педи и началом диабета.
-   Это может свидетельствовать о том, что диабет не является наследственным или что функция родословной диабета нуждается в работе.
-   Более высокие значения плазмы в сочетании с более высокими значениями для возраста, педиатрии, массы, инсулиновой, кожной, жировой ткани и прегина, как правило, показывают большую вероятность положительного результата теста на диабет.



## Очистка данных

По предъявленным распределениям для некоторых измерений можно заранее принять тот факт, что неокторые данные были собраны ошибочно. На основе таких величин можно провести некоторую фильтрацию данных измерений





```
## 'data.frame':	392 obs. of  9 variables:
##  $ Pregnancies             : int  1 0 3 2 1 5 0 1 1 3 ...
##  $ Glucose                 : int  89 137 78 197 189 166 118 103 115 126 ...
##  $ BloodPressure           : int  66 40 50 70 60 72 84 30 70 88 ...
##  $ SkinThickness           : int  23 35 32 45 23 19 47 38 30 41 ...
##  $ Insulin                 : int  94 168 88 543 846 175 230 83 96 235 ...
##  $ BMI                     : num  28.1 43.1 31 30.5 30.1 25.8 45.8 43.3 34.6 39.3 ...
##  $ DiabetesPedigreeFunction: num  0.167 2.288 0.248 0.158 0.398 ...
##  $ Age                     : int  21 33 26 53 59 51 31 33 32 27 ...
##  $ Outcome                 : int  0 1 1 1 1 1 1 0 1 0 ...
```


![](diabetesNotebook_files/figure-docx/unnamed-chunk-4-1.png)<!-- -->


![](diabetesNotebook_files/figure-docx/unnamed-chunk-5-1.png)<!-- -->


![](diabetesNotebook_files/figure-docx/unnamed-chunk-6-1.png)<!-- -->


![](diabetesNotebook_files/figure-docx/unnamed-chunk-7-1.png)<!-- -->


![](diabetesNotebook_files/figure-docx/unnamed-chunk-8-1.png)<!-- -->


![](diabetesNotebook_files/figure-docx/unnamed-chunk-9-1.png)<!-- -->


![](diabetesNotebook_files/figure-docx/unnamed-chunk-10-1.png)<!-- -->


![](diabetesNotebook_files/figure-docx/unnamed-chunk-11-1.png)<!-- -->


![](diabetesNotebook_files/figure-docx/unnamed-chunk-12-1.png)<!-- -->


![](diabetesNotebook_files/figure-docx/bloodpressure density filtered-1.png)<!-- -->


![](diabetesNotebook_files/figure-docx/glucoze density filtered-1.png)<!-- -->


![](diabetesNotebook_files/figure-docx/skinthickness density filtered-1.png)<!-- -->


![](diabetesNotebook_files/figure-docx/insulin density filtered-1.png)<!-- -->


![](diabetesNotebook_files/figure-docx/BMI density filtered-1.png)<!-- -->


![](diabetesNotebook_files/figure-docx/entfamily density filtered-1.png)<!-- -->


![](diabetesNotebook_files/figure-docx/age density filtered-1.png)<!-- -->

## Парные корреляции

![](diabetesNotebook_files/figure-docx/unnamed-chunk-13-1.png)<!-- -->

![](diabetesNotebook_files/figure-docx/unnamed-chunk-14-1.png)<!-- -->

![](diabetesNotebook_files/figure-docx/unnamed-chunk-15-1.png)<!-- -->

![](diabetesNotebook_files/figure-docx/unnamed-chunk-16-1.png)<!-- -->

## Перевод величин в систему СИ


\[
  \kappa_1 = BloodPressure \cdot Age^2 \cdot Insulin^{-1} \cdot SkinThickness^2
\]



```r
df_FM <- dplyr::mutate(.data = df_filtered, 
                       Glu_SE = Glucose * 6 * 10 ^ (-23) * 10^3,
                       Ins_SE = Insulin * 34.7 * 10^-3,
                       BMI_SE = BMI,
                       ST_SE = SkinThickness * 10^(-3),
                       Press_SE = BloodPressure * 133.32,
                       Years_SE = Age * 365.25 * 24 * 60 * 60)
df_FM$Kappa1 <- df_FM$Press_SE * df_FM$Years_SE^(2) * df_FM$Ins_SE^(-1) * df_FM$ST_SE^(2)
```



![](diabetesNotebook_files/figure-docx/unnamed-chunk-18-1.png)<!-- -->


![](diabetesNotebook_files/figure-docx/unnamed-chunk-19-1.png)<!-- -->





![](diabetesNotebook_files/figure-docx/unnamed-chunk-21-1.png)<!-- -->


![](diabetesNotebook_files/figure-docx/unnamed-chunk-22-1.png)<!-- -->

